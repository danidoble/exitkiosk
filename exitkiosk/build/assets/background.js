chrome.runtime.onInstalled.addListener(async o=>{try{if(o===chrome.runtime.OnInstalledReason.UPDATE){const e=await chrome.storage.sync.get("keyword_to_exit");e.keyword_to_exit&&(await chrome.storage.sync.remove("keyword_to_exit"),await s(e.keyword_to_exit))}o===chrome.runtime.OnInstalledReason.INSTALL&&await s(),(o===chrome.runtime.OnInstalledReason.UPDATE||o===chrome.runtime.OnInstalledReason.INSTALL)&&await chrome.runtime.openOptionsPage()}catch(e){console.log(e)}});chrome.tabs.onUpdated.addListener(async(o,e,t)=>{const r=await chrome.storage.sync.get({keywords:["exitkiosk"]});e.status==="loading"&&t.url&&r.keywords.some(n=>t.url.indexOf(n)>-1)&&await chrome.tabs.remove(o)});async function s(o="exitkiosk"){let e=await chrome.storage.sync.get({keywords:[]});e=e.keywords,e.push(o);const t=[...new Set(e)];await chrome.storage.sync.set({keywords:t,version:"v1.2.0"})}
